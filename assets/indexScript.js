const data = {
  "bucheinbaende": [
      {name: "bucheinbaende-1",
       urls: [
        "../imgs/bucheinbaende/Flemming_Satt gelebt_2 .jpg",
        "../bucheinbaende/Flemming_Satt gelebt_1.jpg"],
       title: ["Paul Fleming: Ich habe satt gelebt - Gedichte"],
       subtitle: ["herausgegeben von THOMAS&nbsp;ROSENLÖCHER&emsp;Insel Verlag Frankfurt am Main und Leipzig, 2009"],
       description: ["Edelpappband, Bezugspapier und Vorsätze gespachtelt und in einem Stück verarbeitet, Kopf-Naturschnitt, dunkelrotes Lederkapital, graublauer Kartonschuber. Format: 12,5 cm x 18,5 cm; 2013, Privatbesitz"],
       foto: "Fotos: ANETT&nbsp;ARNOLD"
      }, 
      {name: "bucheinbaende-2", 
       urls: ["../imgs/bucheinbaende/Rilke_Wie soll ich_1.jpg"],
       title: ["Rainer Maria Rilke: Wie soll ich meine Seele halten - Liebesgedichte"],
       subtitle: ["Sonderausgabe 2012&emsp;Insel Verlag Frankfurt am Main und Leipzig, 1994"],
       description: ["Edelpappband, Bezugspapier handgewalzt von ANNETTE&nbsp;VOGEL, 2011, Kapitalverstärkung aus schwarzem Oasenziegenleder an Kopf und Fuß, dunkelgrüne Vorsätze aus INGRES-Papier, 3-seitiger Naturschnitt, rotes Lederkapital, schwarzer Kartonschuber. Format: 12,3 cm x 18,4 cm; 2013, Privatbesitz"],
       foto: "Foto: ANETT&nbsp;ARNOLD"
      }, 
      {name: "bucheinbaende-3", 
       urls: [
        "../imgs/bucheinbaende/Magische Nacht_3 Kopie.jpg",
        "../imgs/bucheinbaende/Magische Nacht_1 Kopie.jpg",
        "../imgs/bucheinbaende/Magische Nacht_2 Kopie.jpg"],
       title: ["Werner Bergengruen: Magische Nacht - Liebesgedichte"],
       subtitle: ["herausgegeben von CHARLOTTE&nbsp;BERGENGRUEN&emsp;Verlag der Arche in Zürich, 1978"],
       description: ["Leporello, Deckel aus handgeschöpftem Papier mit eingelegten Streifen, farbig gestaltet und handgewalzt von ANNETTE&nbsp;VOGEL, 2012, Heftung mit einem farbigen Zwirn, Goldprägung auf dem Vorderdeckel, Papercase aus dunkelblauem Karton. Format: 10,8 cm x 19,2 cm, 2013, Privatbesitz"],
       foto: "Fotos: ANETT&nbsp;ARNOLD"
      }, 
      {name: "bucheinbaende-4", 
       url: "../imgs/bucheinbaende/Faes_Paris_2.jpg",
       description: ""
      }, 
      {name: "bucheinbaende-5", 
       url: "../imgs/bucheinbaende/Rilke_Briefe_2.jpg",
       description: ""
      }, 
      {name: "bucheinbaende-6", 
       url: "../imgs/bucheinbaende/Schacht_Bell Island_Ansicht_bearbeitet-1.jpg",
       description: ""
      }, 
      {name: "bucheinbaende-7", 
       url: "../imgs/bucheinbaende/Anett Arnold_SIMONS_Rokoko_Ansicht klein.jpg",
       description: ""
      }, 
      {name: "bucheinbaende-8", 
       url: "../imgs/bucheinbaende/Matisse.jpg",
       description: ""
      }, 
      {name: "bucheinbaende-9", 
       url: "../imgs/bucheinbaende/vyoral_Ansicht.jpg",
       description: ""
      }, 
      {name: "bucheinbaende-10", 
       url: "../imgs/bucheinbaende/Shakespeare.jpg",
       description: ""
      }, 
      {name: "bucheinbaende-11", 
       url: "../imgs/bucheinbaende/Whitman_Schiefer grün.jpg",
       description: ""
      }, 
      {name: "bucheinbaende-12", 
       url: "../imgs/bucheinbaende/Rilke_Elegien_2017.jpg",
      description: ""
      }, 
      {name: "bucheinbaende-13", 
      url: "../imgs/bucheinbaende/Arnold_Paul_Luftschiffer.jpg",
      description: ""
      }, 
      {name: "bucheinbaende-14", 
      url: "../imgs/bucheinbaende/Rilke_Kleine Kostbarkeiten_2.jpg",
      description: ""
      }, 
      {name: "bucheinbaende-15", 
      url: "../imgs/bucheinbaende/Schuhu.jpg",
      description: ""}, 
      {name: "bucheinbaende-16", 
      url: "../imgs/bucheinbaende/Anett Arnold_DANTE_Sonetti_Ansicht Kopie.jpg",
      description: ""
      }, 
      {name: "bucheinbaende-17", 
      url: "../imgs/bucheinbaende/Simons_Altdeutsche Minnelieder_Ansicht.jpg",
      description: ""
      }, 
      {name: "bucheinbaende-18", 
      url: "../imgs/bucheinbaende/Kopert_rot_Ansicht.jpg",
      description: ""
      }, 
      {name: "bucheinbaende-19", 
      url: "../imgs/bucheinbaende/POE_I.jpg",
      description: ""
      }, 
      {name: "bucheinbaende-20", 
      url: "../imgs/bucheinbaende/Anett Arnold_Kleist_Marionettentheater_Einband_Gesamtansicht.jpg",
      description: ""
      }, 
      {name: "bucheinbaende-21", 
      url: "../imgs/bucheinbaende/Hero_Leander.jpg",
      description: ""
      }, 
      {name: "bucheinbaende-22", 
      url: "../imgs/bucheinbaende/Anett_Arnold_Bucheinbaende_Fried_innen[1].jpg",
      description: ""
      }],
  "restaurierungen": [
      {name: "restaurierungen-1", 
      url: "../imgs/restaurierungen/Album um 1700 vorher nachher 1.jpg",
      description: ""
      },
      {name: "restaurierungen-2", 
      url: "../imgs/restaurierungen/Parlophon vorher nachher.jpg",
      description: ""
      },
      {name: "restaurierungen-3", 
      url: "../imgs/restaurierungen/Laurembergii vorher nachher 1.jpg",
      description: ""
      },
      {name: "restaurierungen-4", 
      url: "../imgs/restaurierungen/Anett_Arnold_Historische_Karten_Restaurierung.jpg",
      description: ""
      },
      {name: "restaurierungen-5", 
      url: "../imgs/restaurierungen/Burgundici vorher nachher.jpg",
      description: ""
      },
      {name: "restaurierungen-6", 
      url: "../imgs/restaurierungen/938_23 vorher nachher.jpg",
      description: ""
      },
      {name: "restaurierungen-7", 
      url: "../imgs/restaurierungen/S 468 vorher nachher.jpg",
      description: ""
      },
      {name: "restaurierungen-8", 
      url: "../imgs/restaurierungen/Gerichtsordnung Celle vorher nachher.jpg",
      description: ""
      },
      {name: "restaurierungen-9", 
      url: "../imgs/restaurierungen/Venetia vorher nachher.jpg",
      description: ""
      },
      {name: "restaurierungen-10", 
      url: "../imgs/restaurierungen/Halle vorher nachher.jpg",
      description: ""
      },
      {name: "restaurierungen-11", 
      url: "../imgs/restaurierungen/Löseke vorher nachher.jpg",
      description: ""
      },
      {name: "restaurierungen-12", 
      url: "../imgs/restaurierungen/Rom vorher nachher.jpg",
      description: ""
      },
      {name: "restaurierungen-13", 
      url: "../imgs/restaurierungen/Sammelband vorher nachher 2.jpg",
      description: ""
      },
      {name: "restaurierungen-14", 
      url: "../imgs/restaurierungen/S 810 vorher nachher außen.jpg",
      description: ""
      },
      {name: "restaurierungen-15", 
      url: "../imgs/restaurierungen/Schließen vorher nachher.jpg",
      description: ""
      },
      {name: "restaurierungen-16", 
      url: "../imgs/restaurierungen/S 815 vorher nachher außen.jpg",
      description: ""
      }],
  "objekte": [
      {name: "objekte-1", 
      url: "../imgs/objekte/Kartonage 2.jpg",
      description: ""
      },
      {name: "objekte-2", 
      url: "../imgs/objekte/Papiertheater Engelbrecht 1.jpg",
      description: ""
      },
      {name: "objekte-3", 
      url: "../imgs/objekte/Schubladen 2.jpg",
      description: ""
      },
      {name: "objekte-4", 
      url: "../imgs/objekte/Anett_Arnold_Behaelter_Dose_1 Kopie.jpg",
      description: ""
      },
      {name: "objekte-5", 
      url: "../imgs/objekte/Anett_Arnold_Objekt_Schale.jpg",
      description: ""
      },
      {name: "objekte-6", 
      url: "../imgs/objekte/Suminagashi_Schachtel.jpg",
      description: ""
      },
      {name: "objekte-7", 
      url: "../imgs/objekte/Zuckergemmenschachtel.jpg",
      description: ""
      },
      {name: "objekte-8", 
      url: "../imgs/objekte/Taufschale 4.jpg",
      description: ""
      }],
  "papiere": [
      {name: "papiere-1", 
      url: "../imgs/papiere/Papier 1.jpg",
      description: ""
      },
      {name: "papiere-2", 
      url: "../imgs/papiere/Kleister 1.jpg",
      description: ""
      },
      {name: "papiere-3", 
      url: "../imgs/papiere/Papier 4.jpg",
      description: ""
      },
      {name: "papiere-4", 
      url: "../imgs/papiere/Spachtel 2.jpg",
      description: ""
      },
      {name: "papiere-5", 
      url: "../imgs/papiere/Papier 5.jpg",
      description: ""
      },
      {name: "papiere-6", 
      url: "../imgs/papiere/Kleister 3.jpg",
      description: ""
      },
      {name: "papiere-7", 
      url: "../imgs/papiere/Papier 11.jpg",
      description: ""
      },
      {name: "papiere-8", 
      url: "../imgs/papiere/Spachtel 3a.jpg",
      description: ""
      },
      {name: "papiere-9", 
      url: "../imgs/papiere/Papier 8.jpg",
      description: ""
      },
      {name: "papiere-10", 
      url: "../imgs/papiere/Spachtel 4.jpg",
      description: ""
      },
      {name: "papiere-11", 
      url: "../imgs/papiere/Kleister 2.jpg",
      description: ""
      },
      {name: "papiere-12", 
      url: "../imgs/papiere/Papier 9.jpg",
      description: ""
      },
      {name: "papiere-13", 
      url: "../imgs/papiere/Kleister 4.jpg",
      description: ""
      },
      {name: "papiere-14", 
      url: "../imgs/papiere/Papier 6.jpg",
      description: ""
      },
      {name: "papiere-15", 
      url: "../imgs/papiere/Papier 2.jpg",
      description: ""
      },
      {name: "papiere-16", 
      url: "../imgs/papiere/Spachtel 6.jpg",
      description: ""
      },
      {name: "papiere-17", 
      url: "../imgs/papiere/Papier 10.jpg",
      description: ""
      },
      {name: "papiere-18", 
      url: "../imgs/papiere/Papier 3.jpg",
      description: ""
      },
      {name: "papiere-19", 
      url: "../imgs/papiere/Spachtel 1.jpg",
      description: ""
      }],
  "faltarbeiten": [
      {name: "faltarbeiten-1", 
      url: "../imgs/faltarbeiten/Faltung1.jpg",
      description: ""
      },
      {name: "faltarbeiten-2", 
      url: "../imgs/faltarbeiten/FaltungE.jpg",
      description: ""
      },
      {name: "faltarbeiten-3", 
      url: "../imgs/faltarbeiten/Faltung8.jpg",
      description: ""
      },
      {name: "faltarbeiten-4", 
      url: "../imgs/faltarbeiten/FaltungA.jpg",
      description: ""
      },
      {name: "faltarbeiten-5", 
      url: "../imgs/faltarbeiten/image1324.jpg",
      description: ""
      },
      {name: "faltarbeiten-6", 
      url: "../imgs/faltarbeiten/FaltungD.jpg",
      description: ""
      },
      {name: "faltarbeiten-7", 
      url: "../imgs/faltarbeiten/FaltungB.jpg",
      description: ""
      },
      {name: "faltarbeiten-8", 
      url: "../imgs/faltarbeiten/image1333.jpg",
      description: ""
      },
      {name: "faltarbeiten-9", 
      url: "../imgs/faltarbeiten/image1336.jpg",
      description: ""
      },
      {name: "faltarbeiten-10", 
      url: "../imgs/faltarbeiten/Faltung9b.jpg",
      description: ""
      },
      {name: "faltarbeiten-11", 
      url: "../imgs/faltarbeiten/image1342.jpg",
      description: ""
      },
      {name: "faltarbeiten-12", 
      url: "../imgs/faltarbeiten/Faltung7.jpg",
      description: ""
      }]
    };
const tabs = ['bucheinbaende', 'restaurierungen', 'objekte', 'papiere', 'faltarbeiten'];
const sectionLimits = [22, 16, 8, 19, 12];

sessionStorage.setItem("data", JSON.stringify(data));
sessionStorage.setItem("categories", JSON.stringify(tabs));

// var obj = (sessionStorage.getItem("data"));
// console.log("OBJ" + JSON.parse(obj)["bucheinbaende"][0].name);

class TitlePage extends React.Component {
    constructor (props) {
        super(props);

        this.handleClick = this.handleClick.bind(this);

        this.minusSlides = this.minusSlides.bind(this);
        this.currentSlide = this.currentSlide.bind(this);
        this.plusSlides = this.plusSlides.bind(this);
    }
    componentDidMount() {
      $(".prev").prop('disabled', true);
    }
    handleClick(e) {

      if (e.target.className == "next") {
        this.plusSlides(e.target.id);
      } else if (e.target.className == "prev") {
        this.minusSlides(e.target.id);
      } else if (e.target.className.substring(0, 3) == "dot") {
        this.currentSlide(e.target);
      }
    }
    minusSlides(name) {
      const section = name.substring(0, name.length-5);
      const lastIndex = parseInt($("."+ section).filter(function () {
        return $(this).css('display') != "none";
      })[2].id.substring(section.length + 8));
      const firstIndex = lastIndex - 3;

      if (firstIndex < 1) {
        $("#" + section + "-prev").prop('disabled', true);

      } else if (firstIndex == 1) {

        $("#" + section + "-prev").prop('disabled', true);

        $("#" + section + "-button-" + firstIndex).css('display', 'block');
        $("#" + section + "-dot-" + firstIndex).addClass("active");
        $("#" + section + "-button-" + lastIndex).css('display', 'none');
        $("#" + section + "-dot-" + lastIndex).removeClass("active");

        $("#" + section + "-next").prop('disabled', false);

      }else {
        $("#" + section + "-button-" + firstIndex).css('display', 'block');
        $("#" + section + "-dot-" + firstIndex).addClass("active");
        $("#" + section + "-button-" + lastIndex).css('display', 'none');
        $("#" + section + "-dot-" + lastIndex).removeClass("active");

        $("#" + section + "-next").prop('disabled', false);
      }
    }
    currentSlide(object) {
      const section = object.id.substring(0, object.id.indexOf("-"));
      const index = parseInt(object.id.substring(section.length + 5));

      if ((index + 1) > document.getElementsByClassName(section + "-dot").length) {
        $("." + section + "-dot").removeClass("active");
        $("#" + section + "-dot-" + index).addClass("active");
        $("#" + section + "-dot-" + (index - 1)).addClass("active");
        $("#" + section + "-dot-" + (index - 2)).addClass("active");

        $("." + section).css("display", "none");
        $("#" + section + "-button-" + index).css("display", "block");
        $("#" + section + "-button-" + (index - 1)).css("display", "block");
        $("#" + section + "-button-" + (index - 2)).css("display", "block");

        $("#" + section + "-next").prop("disabled", true);
        $("#" + section + "-prev").prop("disabled", false);

      } else if ((index - 1) < 1) {

        $("." + section + "-dot").removeClass("active");
        $("#" + section + "-dot-" + index).addClass("active");
        $("#" + section + "-dot-" + (index + 1)).addClass("active");
        $("#" + section + "-dot-" + (index + 2)).addClass("active");

        $("." + section).css("display", "none");
        $("#" + section + "-button-" + index).css("display", "block");
        $("#" + section + "-button-" + (index + 1)).css("display", "block");
        $("#" + section + "-button-" + (index + 2)).css("display", "block");

        $("#" + section + "-prev").prop("disabled", true);
        $("#" + section + "-next").prop("disabled", false);

      } else {

        $("." + section + "-dot").removeClass("active");
        $("#" + section + "-dot-" + index).addClass("active");
        $("#" + section + "-dot-" + (index + 1)).addClass("active");
        $("#" + section + "-dot-" + (index - 1)).addClass("active");

        $("." + section).css("display", "none");
        $("#" + section + "-button-" + index).css("display", "block");
        $("#" + section + "-button-" + (index + 1)).css("display", "block");
        $("#" + section + "-button-" + (index - 1)).css("display", "block");

        $("#" + section + "-prev").prop("disabled", false);
        $("#" + section + "-next").prop("disabled", false);

        if ((index + 1) == document.getElementsByClassName(section + "-dot").length) {
          $("#" + section + "-next").prop("disabled", true);
        }
        if ((index - 1) == 1) {
          $("#" + section + "-prev").prop("disabled", true);
        }
      }
    }
    plusSlides(name) {
      
      const section = name.substring(0, name.length-5);
      const lastIndex = parseInt($("."+ section).filter(function () {
        return $(this).css('display') != "none";
      })[2].id.substring(section.length + 8)) + 1;
      const firstIndex = lastIndex - 3;

      if (lastIndex > document.getElementsByClassName(section).length) {
        $("#" + section + "-next").prop('disabled', true);
        $("#" + section + "-prev").prop('disabled', false);

      } else if (lastIndex == document.getElementsByClassName(section).length) {

        $("#" + section + "-next").prop('disabled', true);
        $("#" + section + "-prev").prop('disabled', false);

        $("#" + section + "-button-" + lastIndex).css('display', 'block');
        $("#" + section + "-dot-" + lastIndex).addClass("active");
        $("#" + section + "-button-" + firstIndex).css('display', 'none');
        $("#" + section + "-dot-" + firstIndex).removeClass("active");
        
      }else {

        $("#" + section + "-button-" + lastIndex).css('display', 'block');
        $("#" + section + "-dot-" + lastIndex).addClass("active");
        $("#" + section + "-button-" + firstIndex).css('display', 'none');
        $("#" + section + "-dot-" + firstIndex).removeClass("active");
        
        $("#" + section + "-prev").prop('disabled', false);
      }
    }

    render () {
        return (
          <div>
            {tabs.map(tab => {
              return <Section id={tab} onClick={this.handleClick}/>
            })}
          </div>
        )
    }
}

const Section = (props) => {
  const numbers = getTotalOfObjects(props.id);

  return(
    <section id={props.id + "-section"} className="sections">
      <h1 className="section-header">{props.id.charAt(0).toUpperCase() + props.id.substring(1)}</h1>
      <div className="vorschau-div">
        <button id={props.id + "-prev"} className="prev" onClick={props.onClick}>&#10094;</button>
        {numbers.map(number => {
          return <Preview id={props.id} number={number} onClick={props.onClick} />
        })}
        <button id={props.id + "-next"} className="next" onClick={props.onClick}>&#10095;</button>
      </div>
      <div className="dots-div">
        {numbers.map(number => {
          return <Dot id={props.id} number={number} onClick={props.onClick} />
        })}
      </div>
    </section>
  )
}
const Preview = (props) => {
  return(
    props.number <= 3 ? <a id={props.id + "-button-" + props.number} className={"vorschau-button " + props.id} onClick={props.onClick} href={props.id + ".html"}></a>
    : <a id={props.id + "-button-" + props.number} className={"vorschau-button " + props.id} onClick={props.onClick}  href={props.id + ".html"} style={{display: 'none'}}></a>
  )
}
const Dot = (props) => {
  return(
    props.number <= 3 ? <div id={props.id + "-dot-" + props.number} className={"dot " + props.id + "-dot active"} onClick={props.onClick}></div>
    : <div className={"dot " + props.id + "-dot"} id={props.id + "-dot-" + props.number} onClick={props.onClick}></div>
  )
}

//
//
//
function getTotalOfObjects(section) {
  const numbers = [];
  for (let i=1; i <= sectionLimits[tabs.indexOf(section)]; i++) {
    numbers.push(i);
  }
  return numbers;
}

ReactDOM.render(<TitlePage />, document.getElementById('root'));